import*as e from"node:crypto";import{createRequire as t}from"node:module";const o=t(import.meta.url);var n={56(e){e.exports=JSON.parse('{"name":"dotenv","version":"17.2.3","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","pretest":"npm run lint && npm run dts-check","test":"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"homepage":"https://github.com/motdotla/dotenv#readme","funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^18.11.3","decache":"^4.6.2","sinon":"^14.0.1","standard":"^17.0.0","standard-version":"^9.5.0","tap":"^19.2.0","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')},561(t){t.exports=e},857(e){e.exports=o("os")},896(e){e.exports=o("fs")},928(e){e.exports=o("path")},998(e,t,o){const n=o(896),r=o(928),s=o(857),c=o(561),a=o(56).version,i=["ðŸ” encrypt with Dotenvx: https://dotenvx.com","ðŸ” prevent committing .env to code: https://dotenvx.com/precommit","ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild","ðŸ“¡ add observability to secrets: https://dotenvx.com/ops","ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops","ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops","âœ… audit secrets and track compliance: https://dotenvx.com/ops","ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops","ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops","ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`","âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }","âš™ï¸  enable debug logging with { debug: true }","âš™ï¸  override existing env vars with { override: true }","âš™ï¸  suppress all logs with { quiet: true }","âš™ï¸  write to custom object with { processEnv: myObject }","âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }"];function l(e){return"string"==typeof e?!["false","0","no","off",""].includes(e.toLowerCase()):Boolean(e)}const p=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function d(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}function u(e){console.log(`[dotenv@${a}] ${e}`)}function v(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function f(e,t){let o;try{o=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const n=o.password;if(!n){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const r=o.searchParams.get("environment");if(!r){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const s=`DOTENV_VAULT_${r.toUpperCase()}`,c=e.parsed[s];if(!c){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:c,key:n}}function g(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const o of e.path)n.existsSync(o)&&(t=o.endsWith(".vault")?o:`${o}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=r.resolve(process.cwd(),".env.vault");return n.existsSync(t)?t:null}function m(e){return"~"===e[0]?r.join(s.homedir(),e.slice(1)):e}const h={configDotenv:function(e){const t=r.resolve(process.cwd(),".env");let o="utf8",s=process.env;e&&null!=e.processEnv&&(s=e.processEnv);let c=l(s.DOTENV_CONFIG_DEBUG||e&&e.debug),a=l(s.DOTENV_CONFIG_QUIET||e&&e.quiet);e&&e.encoding?o=e.encoding:c&&d("No encoding is specified. UTF-8 is used by default");let p,v=[t];if(e&&e.path)if(Array.isArray(e.path)){v=[];for(const t of e.path)v.push(m(t))}else v=[m(e.path)];const f={};for(const t of v)try{const r=h.parse(n.readFileSync(t,{encoding:o}));h.populate(f,r,e)}catch(e){c&&d(`Failed to load ${t} ${e.message}`),p=e}const g=h.populate(s,f,e);if(c=l(s.DOTENV_CONFIG_DEBUG||c),a=l(s.DOTENV_CONFIG_QUIET||a),c||!a){const e=Object.keys(g).length,t=[];for(const e of v)try{const o=r.relative(process.cwd(),e);t.push(o)}catch(t){c&&d(`Failed to load ${e} ${t.message}`),p=t}u(`injecting env (${e}) from ${t.join(",")} ${E=`-- tip: ${i[Math.floor(Math.random()*i.length)]}`,process.stdout.isTTY?`[2m${E}[0m`:E}`)}var E;return p?{parsed:f,error:p}:{parsed:f}},_configVault:function(e){const t=l(process.env.DOTENV_CONFIG_DEBUG||e&&e.debug),o=l(process.env.DOTENV_CONFIG_QUIET||e&&e.quiet);!t&&o||u("Loading env from encrypted .env.vault");const n=h._parseVault(e);let r=process.env;return e&&null!=e.processEnv&&(r=e.processEnv),h.populate(r,n,e),{parsed:n}},_parseVault:function(e){const t=g(e=e||{});e.path=t;const o=h.configDotenv(e);if(!o.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const n=v(e).split(","),r=n.length;let s;for(let e=0;e<r;e++)try{const t=f(o,n[e].trim());s=h.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=r)throw t}return h.parse(s)},config:function(e){if(0===v(e).length)return h.configDotenv(e);const t=g(e);return t?h._configVault(e):(o=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.error(`[dotenv@${a}][WARN] ${o}`),h.configDotenv(e));var o},decrypt:function(e,t){const o=Buffer.from(t.slice(-64),"hex");let n=Buffer.from(e,"base64");const r=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{const e=c.createDecipheriv("aes-256-gcm",o,r);return e.setAuthTag(s),`${e.update(n)}${e.final()}`}catch(e){const t=e instanceof RangeError,o="Invalid key length"===e.message,n="Unsupported state or unable to authenticate data"===e.message;if(t||o){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(n){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let o,n=e.toString();for(n=n.replace(/\r\n?/gm,"\n");null!=(o=p.exec(n));){const e=o[1];let n=o[2]||"";n=n.trim();const r=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===r&&(n=n.replace(/\\n/g,"\n"),n=n.replace(/\\r/g,"\r")),t[e]=n}return t},populate:function(e,t,o={}){const n=Boolean(o&&o.debug),r=Boolean(o&&o.override),s={};if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const o of Object.keys(t))Object.prototype.hasOwnProperty.call(e,o)?(!0===r&&(e[o]=t[o],s[o]=t[o]),n&&d(!0===r?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(e[o]=t[o],s[o]=t[o]);return s}};e.exports.configDotenv=h.configDotenv,e.exports._configVault=h._configVault,e.exports._parseVault=h._parseVault,e.exports.config=h.config,e.exports.decrypt=h.decrypt,e.exports.parse=h.parse,e.exports.populate=h.populate,e.exports=h}},r={};(function e(t){var o=r[t];if(void 0!==o)return o.exports;var s=r[t]={exports:{}};return n[t](s,s.exports,e),s.exports})(998).config();var s={mode:process.env.APP_MODE||"development"},c=function(){for(var e,t=(new Date).toISOString(),o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];(e=console).log.apply(e,["[".concat(t,"]")].concat(n))};const a=o("node:crypto"),i={randomUUID:a.randomUUID},l=new Uint8Array(256);let p=l.length;const d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));function u(e,t,o){const n=(e=e||{}).random??e.rng?.()??(p>l.length-16&&((0,a.randomFillSync)(l),p=0),l.slice(p,p+=16));if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((o=o||0)<0||o+16>t.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[o+e]=n[e];return t}return function(e,t=0){return(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase()}(n)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown",o=(new Date).toISOString();c("ERROR in ".concat(t,":"),e.message),"development"===process.env.APP_MODE&&console.error("[".concat(o,"] STACK TRACE:"),e.stack)}c("Project is running in",s.mode,"mode");try{var f=function(){try{var e=function(){try{return!i.randomUUID||t||e?u(e,t,o):i.randomUUID()}catch(e){throw new Error("UUID generation failed")}var e,t,o}();return c("Generated UUID from controller:",e),e}catch(e){return v(e,"UUID Controller"),null}}();if(!f)throw new Error("UUID request returned null");c("Final UUID:",f)}catch(e){v(e,"Main Entry")}